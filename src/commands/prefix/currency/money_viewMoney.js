const User = require('../../../model/userModel');

module.exports = {
    name: 'money',
    description: 'üí∞ Xem s·ªë ti·ªÅn c·ªßa b·∫°n ho·∫∑c c·ªßa ng∆∞·ªùi kh√°c!',
    execute: async (message) => {
        const mention = message.mentions.users.first();
        const targetId = mention ? mention.id : message.author.id; // N·∫øu tag ai ƒë√≥, l·∫•y ID c·ªßa h·ªç, n·∫øu kh√¥ng th√¨ l·∫•y ID c·ªßa ng∆∞·ªùi g·ª≠i
        const targetUsername = mention ? mention.username : message.author.username;

        try {
            let user = await User.findOne({ userId: targetId });

            // N·∫øu user ch∆∞a c√≥ trong DB, t·∫°o m·ªõi v·ªõi 1000 coin
            if (!user) {
                user = new User({ userId: targetId, money: 1000, wins: 0, losses: 0, gameInProgress: false });
                await user.save();
            }

            message.reply(`üí∞ **S·ªë ti·ªÅn c·ªßa ${targetUsername} l√† ** ${user.money} coin`);
        } catch (error) {
            console.error('L·ªói khi l·∫•y d·ªØ li·ªáu ng∆∞·ªùi d√πng:', error);
            message.reply('‚ö† ƒê√£ x·∫£y ra l·ªói khi l·∫•y s·ªë ti·ªÅn.');
        }
    }
};
